<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; CHARSET=UTF-8" />
<title>YouTube Player JavaScript API Sample</title>
<script type="text/javascript" src="swfobject.js"></script>

<script type="text/javascript">

function embedPlayer() {
    var params = { allowScriptAccess: 'always', bgcolor: '#D5DDB3' };
    var atts = { id: 'myytplayer' };
    swfobject.embedSWF('http://www.youtube.com/apiplayerbeta?enablejsapi=1&amp;playerapiid=ytplayer', 
            'ytapiplayer', '500', '375', '8', null, null, params, atts);
}

function onYouTubePlayerReady(playerId) {
    ytplayer = document.getElementById('myytplayer');
    setInterval(updateytplayerInfo, 250);
    updateytplayerInfo();
    ytplayer.addEventListener('onStateChange', 'onytplayerStateChange');
    document.getElementById('controls').style.display = 'block';
}

function onytplayerStateChange(newState) {
     setytplayerState(newState);
}

function showVolume() {
    alert( ytplayer.getVolume() );
}

function updateytplayerInfo() {
    if (ytplayer) {
        updateTimebar();
    }
}

function updateTimebar() {
    var all = ytplayer.getDuration();
    var part = ytplayer.getCurrentTime();
    var percent = getPercent(all, part);
    var timebarWidth = 450;
    document.getElementById('timebarIndicator').style.left = percent * (timebarWidth / 100) + "px";
}

function getPercent(all, part) {
   return (all > 0) ? (100 / all) * part : 0;
}

</script>

<style rel="stylesheet" type="text/css" media="screen,projection">
body {
    background-color: #fff;
    color: #000;
    font-family: arial, helvetica, sans-serif;
    margin: 20px;
}

a {
    color: #007;
}

.content {
    width: 500px;
    margin-left: auto;
    margin-right: auto;
}

#controls {
    background-color: rgb(213,221,179);
    padding: 5px;
    font-size: 90%;
    margin-top: -4px;
    height: 40px;
    -moz-border-radius: 0 0 10px 10px;
}

#buttons {
    text-align: center;
}

#timebar {
    position: relative;
    top: 8px;
    width: 450px;
    height: 16px;
    background-color: rgb(171,215,220);
    border: 1px solid #333;
    margin-left: auto;
    margin-right: auto;
}

#timebarIndicator {
    position: absolute;
    display: block;
    left: 0;
    top: 0;
    width: 5px;
    height: 16px;
}

.explanation {
    margin-top: 20px;
    font-size: 90%;
}

</style>

</head>

<body onload="embedPlayer()">

<div class="content">

<p class="explanation">This player is not pretty or useful in itself, it's just there to illustrate the YouTube JavaScript Player API. &nbsp;
    <a href="/archive/2008-03-14-n11.html">&gt;&gt;More about this...</a>
</p>

<div id="ytapiplayer">(Ooops, Flash + JavaScript needed...)</div>

<div id="controls" style="display: none">
    <div id="buttons">

        <a href="javascript:ytplayer.loadVideoById('xYPbUb4bfA0', 0)">Load song 1</a> |
        <a href="javascript:ytplayer.loadVideoById('tAtcJ954TjQ', 0)">Load song 2</a> |
        <a href="javascript:ytplayer.loadVideoById('eBGIQ7ZuuiU', 0)">Load song 3</a> |
        <a href="javascript:ytplayer.pauseVideo()">Pause</a> |
        <a href="javascript:ytplayer.playVideo()">Play</a> |
        <a href="javascript:showVolume()">Show volume</a>

    </div>

    <div id="timebar">
        <img id="timebarIndicator" src="timebar-indicator.png" alt="|" />
    </div>
</div>

<div class="explanation">
Look at the source code for this page to see how it's done. Some things you can use:<br />

<pre>ytplayer.loadVideoById(id, startSeconds);
ytplayer.cueVideoById(id, startSeconds);
ytplayer.playVideo();
ytplayer.pauseVideo();
ytplayer.stopVideo();
ytplayer.getState();
ytplayer.seekTo(seconds, true);
ytplayer.getVideoBytesLoaded();
ytplayer.getVideoBytesTotal();
ytplayer.getCurrentTime();
ytplayer.getDuration();
ytplayer.getVideoStartBytes();
ytplayer.mute();
ytplayer.unMute();
ytplayer.getVideoEmbedCode()
ytplayer.getVideoUrl();
ytplayer.setVolume(newVolume);
ytplayer.getVolume();
ytplayer.clearVideo();</pre>

</div>

</div>

<!-- below is just the Google Analytics script, not part of the sample... -->

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-60595-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>

</body>
</html>